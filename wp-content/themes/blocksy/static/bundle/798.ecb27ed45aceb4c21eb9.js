"use strict";(self.blocksyJsonP=self.blocksyJsonP||[]).push([[798],{9798:function(e,t,o){o.r(t),o.d(t,{mount:function(){return c}});var n=o(2194),r=o.n(n);const c=function(e,t){let{event:o}=t;r()&&(ctEvents.trigger("ct:header:update"),function(e){if(!r())return;var t=e.closest("form"),o=t.find(".single_add_to_cart_button"),n=r()(t)[0].action;if("string"!=typeof n)return void t.submit();var c=t.attr("method");void 0!==c&&""!=c||(c="POST");var a=new FormData(t[0]);a.append(o.attr("name"),o.val()),[...a.entries()].reduce((function(e,t){return e+(t[0].indexOf("quantity")>-1?parseInt(t[1],10):0)}),0),t.closest(".quick-view-modal").length&&(t.closest(".quick-view-modal").find(".ct-quick-add").removeClass("added"),t.closest(".quick-view-modal").find(".ct-quick-add").addClass("loading")),o.removeClass("added"),o.addClass("loading"),r()(document.body).trigger("adding_to_cart",[o,[...a.entries()].reduce((function(e,t){let[o,n]=t;return e[o]=n,e}),{})]);const d=new URL(n),i=new URLSearchParams(d.search);i.set("blocksy_add_to_cart","yes"),window.ct_customizer_localizations&&i.set("wp_customize","on"),d.search=i.toString(),n=d.toString(),fetch(n,{method:c,body:a}).then((function(e){return e.text()})).then((function(e,n,c){const a=document.createElement("div");a.innerHTML=e;const d=".woocommerce-error, .wc-block-components-notice-banner.is-error";let i=a.querySelector(d);if(i&&i.innerHTML.length>0){let e=document.querySelector(".woocommerce-notices-wrapper");return e.querySelector(d)&&e.querySelector(d).remove(),void(e&&e.appendChild(i))}const s=a.querySelector("#blocksy-woo-add-to-cart-fragments");if(s){const e=JSON.parse(s.textContent);r()(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,o])}t.closest(".quick-view-modal").length&&(t.closest(".quick-view-modal").find(".ct-quick-add").addClass("added"),t.closest(".quick-view-modal").find(".ct-quick-add").removeClass("loading"))})).catch((function(){return o.removeClass("loading")})).finally((function(){return o.removeClass("loading")}))}(r()(e)))}}}]);